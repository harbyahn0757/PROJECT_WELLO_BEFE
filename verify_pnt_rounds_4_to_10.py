
import asyncio
import os
import sys
import json

# ν”„λ΅μ νΈ κ²½λ΅ μ¶”κ°€
sys.path.append('/home/workspace/PROJECT_WELLO_BEFE/planning-platform/backend')

from app.services.checkup_design.rag_service import init_rag_engine

async def verify_pnt_rounds_4_to_10():
    query_engine = await init_rag_engine(use_local_vector_db=True)
    
    if not query_engine:
        print("β RAG μ—”μ§„ μ΄κΈ°ν™” μ‹¤ν¨")
        return

    # 4μ°¨~10μ°¨ κ²€μ¦: λ‹¤κ°λ„ κµμ°¨ κ²€μ¦ λ° λ„λ½ ν•­λ© μµμΆ… ν™•μΈ
    all_rounds = {
        "4μ°¨": [
            "PNT κ²€μ‚¬ μ²΄κ³„μ—μ„ μΈμλ¦° μ €ν•­μ„± κ²€μ‚¬(HOMA-IR, κ³µλ³µ μΈμλ¦°)κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "μ‹¬νκ΄€ μ§ν™ μ„ν— ν‰κ°€λ¥Ό μ„ν• apoB, Lp(a), μ‚°ν™” LDL κ°™μ€ κ³ κΈ‰ μ§€μ§ κ²€μ‚¬κ°€ PNTμ— μλ”μ§€ μ•λ ¤μ¤.",
            "λ‹Ήν™”νμƒ‰μ†(HbA1c), λ‹Ήν™”μ•λ¶€λ―Ό, ν”„λ­ν† μ‚¬λ―Ό κ°™μ€ λ‹Ήν™” μ§€ν‘ κ²€μ‚¬κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "μ‹ μ¥ κΈ°λ¥ ν‰κ°€λ¥Ό μ„ν• eGFR, Cystatin C, μ†λ³€ λ―Έμ„Έμ•λ¶€λ―Ό κ²€μ‚¬κ°€ μλ”μ§€ μ•λ ¤μ¤."
        ],
        "5μ°¨": [
            "PNTμ—μ„ ν•­μ‚°ν™” λ¥λ ¥ ν‰κ°€λ¥Ό μ„ν• SOD, μΉ΄νƒλΌμ•„μ , GPx κ°™μ€ ν•­μ‚°ν™” ν¨μ† κ²€μ‚¬κ°€ μλ”μ§€ ν™•μΈν•΄μ¤.",
            "λΌ κ±΄κ°• ν‰κ°€λ¥Ό μ„ν• λΉ„νƒ€λ―Ό K, μ¤μ¤ν…μ¤μΉΌμ‹ , CTX, P1NP κ°™μ€ κ³¨λ€μ‚¬ λ§μ»¤κ°€ ν¬ν•¨λλ”μ§€ μ•λ ¤μ¤.",
            "μ½”μ—”μμ„ Q10, μΉ΄λ¥΄λ‹ν‹΄ μμΉ κ²€μ‚¬κ°€ λ―Έν† μ½λ“λ¦¬μ•„ κΈ°λ¥ ν‰κ°€μ— ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "λ©”ν‹Έν™” λ¥λ ¥ ν‰κ°€λ¥Ό μ„ν• SAMe, SAH, λ©”ν‹Έλ§λ΅ μ‚° κ²€μ‚¬κ°€ μλ”μ§€ μ•λ ¤μ¤."
        ],
        "6μ°¨": [
            "μ‹ κ²½μ „λ‹¬λ¬Όμ§ λ¶κ· ν• ν‰κ°€λ¥Ό μ„ν• GABA, κΈ€λ£¨νƒ€λ©”μ΄νΈ, μ•„μ„Έν‹Έμ½λ¦° κ²€μ‚¬κ°€ PNTμ— μλ”μ§€ μ•λ ¤μ¤.",
            "λ¶€μ‹  μ¤νΈλ μ¤ ν”„λ΅νμΌμ—μ„ μ½”ν‹°μ†” μ™Έμ— μ½”ν‹°μ†, μ—ν”Όλ„¤ν”„λ¦°, λ…Έλ¥΄μ—ν”Όλ„¤ν”„λ¦° κ²€μ‚¬κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "μ¥ ν¬κ³Όμ„± ν‰κ°€λ¥Ό μ„ν• μ΅°λλ¦°, LPS ν•­μ²΄, λ½ν΄λ΅μ¤/λ§λ‹ν†¨ ν…μ¤νΈκ°€ μλ”μ§€ μ•λ ¤μ¤.",
            "νμ¤νƒ€λ―Ό λ¶λ‚΄μ„± ν‰κ°€λ¥Ό μ„ν• DAO ν¨μ†, νμ¤νƒ€λ―Ό μμΉ κ²€μ‚¬κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤."
        ],
        "7μ°¨": [
            "κ°‘μƒμ„  μ—­ T3(rT3), κ°‘μƒμ„  κ²°ν•© κΈ€λ΅λ¶λ¦°(TBG) κ²€μ‚¬κ°€ PNT κ°‘μƒμ„  ν‰κ°€μ— ν¬ν•¨λλ”μ§€ μ•λ ¤μ¤.",
            "λ¶€κ°‘μƒμ„  νΈλ¥΄λ¬(PTH), μΉΌμ λ€μ‚¬ ν‰κ°€κ°€ λΌ/λ―Έλ„¤λ„ κ· ν• κ²€μ‚¬μ— ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "νλ¦¬ν‹΄, νΈλμ¤νλ¦°, TIBC, μ²  ν¬ν™”λ„ κ°™μ€ μƒμ„Έ μ² λ¶„ ν¨λ„μ΄ μλ”μ§€ μ•λ ¤μ¤.",
            "μ…€λ λ„, μ”μ¤λ“, ν¬λ΅¬, λ°λ¦¬λΈλ΄ κ°™μ€ λ―Έλ‰ λ―Έλ„¤λ„ κ²€μ‚¬κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤."
        ],
        "8μ°¨": [
            "μ κΈ°μ‚° κ²€μ‚¬μ—μ„ κµ¬μ²΄μ μΌλ΅ μ–΄λ–¤ λ€μ‚¬ κ²½λ΅λ¥Ό ν‰κ°€ν•λ”μ§€ μ„Έλ¶€ ν•­λ©μ„ μ•λ ¤μ¤. (ν¬λ ™μ¤ μ‚¬μ΄ν΄, μ§€λ°©μ‚° μ‚°ν™”, μ‹ κ²½μ „λ‹¬λ¬Όμ§ λ€μ‚¬ λ“±)",
            "μ¥λ‚΄ λ―Έμƒλ¬Ό κ²€μ‚¬(λ§μ΄ν¬λ΅λ°”μ΄μ΄)μ—μ„ ν‰κ°€ν•λ” μ„Έλ¶€ ν•­λ©κ³Ό μ μµκ· /μ ν•΄κ·  λΉ„μ¨ λ¶„μ„μ΄ ν¬ν•¨λλ”μ§€ ν™•μΈν•΄μ¤.",
            "μ•λ λ¥΄κΈ° κ²€μ‚¬μ—μ„ IgE μ™Έμ— IgG μ§€μ—°ν• μ‹ν’ μ•λ λ¥΄κΈ° κ²€μ‚¬κ°€ PNTμ— ν¬ν•¨λλ”μ§€ μ•λ ¤μ¤.",
            "κ°„ ν•΄λ… λ¥λ ¥ ν‰κ°€μ—μ„ νμ΄μ¦1(CYP450), νμ΄μ¦2(κΈ€λ£¨νƒ€μΉμ¨ κ²°ν•©, ν™©μ‚°ν™”, λ©”ν‹Έν™”) κ°κ°μ κ²€μ‚¬κ°€ κµ¬μ²΄μ μΌλ΅ μλ”μ§€ ν™•μΈν•΄μ¤."
        ],
        "9μ°¨": [
            "PNT κ²€μ‚¬ μ¤‘ μΉ¨μµμ  κ²€μ‚¬(μ΅°μ§ μƒκ²€, λ‚΄μ‹κ²½ λ“±)κ°€ ν¬ν•¨λλ” κ²½μ°κ°€ μλ”μ§€ μ•λ ¤μ¤.",
            "μμƒ κ²€μ‚¬(μ΄μν, CT, MRI, DEXA)κ°€ PNT μ²΄κ³„μ—μ„ μ–΄λ–¤ κ²½μ°μ— κ¶μ¥λλ”μ§€ ν™•μΈν•΄μ¤.",
            "μ‹¬μ „λ„, μ΄λ™λ¶€ν•κ²€μ‚¬, 24μ‹κ°„ νμ•• λ¨λ‹ν„°λ§ κ°™μ€ κΈ°λ¥ κ²€μ‚¬κ°€ ν¬ν•¨λλ”μ§€ μ•λ ¤μ¤.",
            "νκΈ°λ¥ κ²€μ‚¬, μ•λ λ¥΄κΈ° ν”Όλ¶€λ°μ‘ κ²€μ‚¬ κ°™μ€ νΈν΅κΈ°/μ•λ λ¥΄κΈ° κΈ°λ¥ κ²€μ‚¬κ°€ μλ”μ§€ ν™•μΈν•΄μ¤."
        ],
        "10μ°¨": [
            "PNT λ¬Έμ§„ ν›„ κ²€μ‚¬ μ„ νƒμ μ°μ„ μμ„ κΈ°μ¤€μ΄λ‚ μ•κ³ λ¦¬μ¦μ΄ λ²΅ν„°μ— μ„¤λ…λμ–΄ μλ”μ§€ μ•λ ¤μ¤.",
            "κ²€μ‚¬ κ²°κ³Ό ν•΄μ„ μ‹ 'κΈ°λ¥μ  λ²”μ„' κΈ°μ¤€κ°’μ΄ κµ¬μ²΄μ μΌλ΅ μ μ‹λμ–΄ μλ”μ§€ ν™•μΈν•΄μ¤.",
            "νΉμ • μ¦μƒ μ΅°ν•©(μ: ν”Όλ΅+μ†ν™”λ¶λ‰+λ‘ν†µ)μ— λ€ν• κ²€μ‚¬ ν¨ν‚¤μ§€λ‚ ν”„λ΅ν† μ½μ΄ μ •μλμ–΄ μλ”μ§€ μ•λ ¤μ¤.",
            "PNT κ²€μ‚¬ μ²΄κ³„μ μµμΆ… λ©ν‘μ™€ κ²€μ‚¬ κ²°κ³Όλ¥Ό μμ–‘ μΉλ£λ΅ μ—°κ²°ν•λ” ν”„λ΅μ„Έμ¤κ°€ μ„¤λ…λμ–΄ μλ”μ§€ ν™•μΈν•΄μ¤."
        ]
    }
    
    print("\n" + "="*70)
    print("π” 4μ°¨~10μ°¨ κµμ°¨ κ²€μ¦: PNT κ²€μ‚¬ ν•­λ© μ™„μ „ μ΄λ§λΌ (ν™κ° λ°©μ§€)")
    print("="*70)
    
    for round_name, queries in all_rounds.items():
        print(f"\n{'='*70}")
        print(f"π“‹ {round_name} κ²€μ¦ μ‹μ‘")
        print(f"{'='*70}")
        
        for query in queries:
            print(f"\nπ“΅ μΏΌλ¦¬: {query}")
            response = await query_engine.aquery(query)
            print(f"β… μ‘λ‹µ:\n{str(response)}\n")
            print("-" * 70)
        
        print(f"\nβ… {round_name} κ²€μ¦ μ™„λ£\n")

if __name__ == "__main__":
    asyncio.run(verify_pnt_rounds_4_to_10())
