# 페이지 이동 정책 문서

## 추이보기 페이지 이동 정책

### 1. 데이터가 있는 경우

#### 1.1 비밀번호 세션 확인
- **세션 유효 시간**: 기본 30분 (설정 가능)
- **세션 만료 후**: 비밀번호 재확인 필요

#### 1.2 이동 로직
```
1. 데이터 존재 확인
   ↓
2. 비밀번호 설정 여부 확인
   ├─ 비밀번호 없음
   │  ├─ 설정 권유 필요 → 비밀번호 설정 모달
   │  └─ 권유 생략 → 바로 이동
   │
   └─ 비밀번호 있음
      ├─ 세션 유효 → 바로 이동 (/results-trend)
      └─ 세션 만료 → 비밀번호 확인 모달
```

#### 1.3 세션 만료 기준
- `last_access_at` 기준으로 일정 시간(기본 30분) 경과 시 세션 만료
- 세션 만료 시 비밀번호 재확인 필요

### 2. 데이터가 없는 경우

#### 2.1 이동 로직
```
데이터 없음 확인
   ↓
문진 페이지로 이동 (/health-questionnaire)
```

#### 2.2 문진 페이지
- 경로: `/health-questionnaire`
- 목적: 건강 정보 수집을 위한 설문조사 진행

### 3. 구현 위치

- **파일**: `planning-platform/frontend/src/pages/MainPage.tsx`
- **함수**: `handleCardClick` (case 'chart')
- **수정 사항**:
  1. 데이터 없을 때 `/login` 대신 `/health-questionnaire`로 이동
  2. 세션 만료 시간 확인 로직 추가
  3. 세션 만료 시 비밀번호 재확인 로직 추가

### 4. 세션 만료 시간 설정

- **기본값**: 30분 (1800초)
- **설정 위치**: `PasswordSessionService.ts` 또는 환경 변수
- **확인 기준**: `last_access_at` 필드와 현재 시간 비교

### 5. 예외 처리

- API 오류 시: 보안을 위해 비밀번호 확인 모달 표시
- 데이터 확인 실패 시: 문진 페이지로 이동




