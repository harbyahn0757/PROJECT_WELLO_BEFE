# 검진결과추이 페이지 리팩터링 계획

## 📋 현재 상황 분석

### 현재 구현 (HealthDataViewer)
- **헤더 구조**: 
  - 뒤로가기 버튼: 플로팅 원형 버튼 (좌상단, `position: fixed`)
  - 타이틀: 동적 제목 (`getPageTitle()`)
  - 마지막 업데이트: 우상단 플로팅 (`position: fixed`)
  - 토글 버튼들: 여러 개의 작은 아이콘 버튼 (햄버거, 검진, 약국, 진료)
- **뷰 모드**: `trends` / `timeline` 조건부 렌더링
- **필터 모드**: `all` / `checkup` / `pharmacy` / `treatment`
- **컴포넌트**: `TrendsSection`, `UnifiedHealthTimeline`

### 목표 디자인 (제공된 이미지)
- **헤더 구조**:
  - 시간 표시 (09:41) - 좌상단
  - 뒤로가기 버튼 - 사각형 버튼 (좌상단, 시간 아래)
  - "건강 추이" 타이틀 - 중앙
  - 정보 아이콘 + "마지막 업데이트: 2025년 10월 23일 오후 08:35" - 우상단
- **탭 구조**:
  - "건강검진 결과 추이" (선택됨, 연한 브라운 배경)
  - "의료 기록 타임라인" (선택 안됨, 진한 브라운 배경)
- **차트 섹션**: 병원 방문 추이, 약국 방문 추이 바 차트
- **타임라인 엔트리들**: 날짜별 건강 기록

---

## 🔍 차이점 비교 테이블

| 항목 | 현재 구현 | 목표 디자인 | 변경 필요도 |
|------|----------|------------|------------|
| **헤더 높이** | 높음 (플로팅 버튼 + 타이틀 + 토글) | 낮음 (한 줄에 모든 요소) | ⭐⭐⭐ 높음 |
| **뒤로가기 버튼** | 원형 플로팅 버튼 | 사각형 버튼 (헤더 내부) | ⭐⭐⭐ 높음 |
| **타이틀 위치** | 중앙, 동적 제목 | 중앙, 고정 "건강 추이" | ⭐⭐ 중간 |
| **마지막 업데이트** | 우상단 플로팅 | 헤더 내부 우측 | ⭐⭐⭐ 높음 |
| **탭 구조** | 여러 개의 작은 토글 버튼 | 2개의 큰 탭 (전체 너비) | ⭐⭐⭐ 높음 |
| **시간 표시** | 없음 | 좌상단에 시간 표시 | ⭐⭐ 중간 |
| **정보 아이콘** | 없음 | 마지막 업데이트 앞에 ① 아이콘 | ⭐⭐ 중간 |
| **차트 레이아웃** | TrendsSection 내부 | 헤더 아래 바로 표시 | ⭐⭐ 중간 |
| **타임라인 레이아웃** | UnifiedHealthTimeline | 동일 (유지) | ⭐ 낮음 |

---

## 🎨 디자인 토큰 사용 현황

### 현재 사용 중인 토큰
- **색상**: `--color-brown-*` 시리즈 (브라운 스킨)
- **간격**: `$spacing-*` (SCSS 변수)
- **폰트**: `var(--font-family-greeting)` (Noto Sans KR)
- **배경**: `#FEF9EE` (메인 페이지와 동일)

### 추가 필요 토큰
- **탭 색상**: 
  - 선택됨: 연한 브라운 (`#FEF9EE` 또는 `--color-brown-50`)
  - 선택 안됨: 진한 브라운 (`#A16A51` 또는 `--color-brown-600`)
- **헤더 배경**: 메인 페이지와 동일 (`#FEF9EE`)
- **시간 표시 폰트**: `var(--font-family-greeting)`, `--font-size-sm`

---

## ♻️ 재사용 가능한 컴포넌트

### MainPage에서 재사용 가능
1. **헤더 구조** (`main-page__header-greeting-section`)
   - 로고 영역 구조 (시간 표시로 대체 가능)
   - 인사말 영역 구조 (타이틀 영역으로 활용 가능)
   - 배경색 및 스타일 (`#FEF9EE`)

2. **Card 컴포넌트**
   - 타임라인 엔트리 카드 스타일 참고 가능
   - 호버 효과 재사용

3. **디자인 토큰**
   - `font-tokens.css`: 폰트 시스템
   - `design-tokens.css`: 색상 시스템
   - `MainPage.scss`: 스타일 패턴

### 새로 생성 필요
1. **헤더 컴포넌트** (`HealthTrendsHeader`)
   - 시간 표시
   - 뒤로가기 버튼
   - 타이틀
   - 마지막 업데이트 정보

2. **탭 컴포넌트** (`HealthTrendsTabs`)
   - 2개의 큰 탭 (전체 너비)
   - 선택 상태 스타일링

---

## 📝 작업 계획 (Phase별)

### Phase 1: 헤더 영역 리팩터링 (우선순위 높음)
**목표**: 헤더 높이 줄이고 디자인 이미지와 일치시키기

1. **헤더 컴포넌트 생성**
   - `components/health/HealthTrendsHeader/index.tsx` 생성
   - 시간 표시 기능 추가
   - 뒤로가기 버튼 스타일 변경 (원형 → 사각형)
   - 타이틀 고정 ("건강 추이")
   - 마지막 업데이트 정보 헤더 내부로 이동

2. **스타일 조정**
   - 헤더 높이 최소화
   - 모든 요소를 한 줄에 배치
   - 배경색 `#FEF9EE` 적용

3. **HealthDataViewer 수정**
   - 기존 헤더 구조 제거
   - 새 헤더 컴포넌트 적용

**예상 작업 시간**: 2-3시간

---

### Phase 2: 탭 구조 변경
**목표**: 여러 토글 버튼을 2개의 큰 탭으로 변경

1. **탭 컴포넌트 생성**
   - `components/health/HealthTrendsTabs/index.tsx` 생성
   - 2개의 탭: "건강검진 결과 추이" / "의료 기록 타임라인"
   - 선택 상태 스타일링 (연한 브라운 / 진한 브라운)

2. **뷰 모드 매핑**
   - "건강검진 결과 추이" → `viewMode: 'trends'`
   - "의료 기록 타임라인" → `viewMode: 'timeline'`

3. **기존 토글 버튼 제거**
   - `external-view-toggle` 제거
   - 필터 버튼들 제거 (또는 다른 위치로 이동)

**예상 작업 시간**: 1-2시간

---

### Phase 3: 차트 섹션 레이아웃 조정
**목표**: 차트가 헤더 바로 아래 표시되도록 조정

1. **TrendsSection 수정**
   - 상단 패딩 조정
   - 차트 레이아웃 확인 및 조정

2. **타임라인 레이아웃 확인**
   - UnifiedHealthTimeline 레이아웃 유지
   - 필요시 스타일 미세 조정

**예상 작업 시간**: 1시간

---

### Phase 4: 스타일 통일 및 토큰화
**목표**: 모든 스타일을 디자인 토큰으로 통일

1. **색상 토큰 추가**
   - 탭 선택/비선택 색상 토큰 추가
   - 헤더 배경색 토큰 확인

2. **간격 토큰 확인**
   - 헤더 내부 간격 토큰화
   - 탭 간격 토큰화

3. **폰트 토큰 확인**
   - 모든 텍스트에 폰트 토큰 적용
   - 시간 표시 폰트 토큰 적용

**예상 작업 시간**: 1시간

---

### Phase 5: 테스트 및 최종 조정
**목표**: 모든 기능 정상 동작 확인 및 디자인 일치 확인

1. **기능 테스트**
   - 탭 전환 동작 확인
   - 차트 표시 확인
   - 타임라인 표시 확인
   - 뒤로가기 동작 확인

2. **디자인 일치 확인**
   - 제공된 이미지와 비교
   - 색상, 간격, 폰트 일치 확인

3. **반응형 확인**
   - 모바일 화면 확인
   - 태블릿 화면 확인

**예상 작업 시간**: 1-2시간

---

## 📊 예상 작업 시간 총계

- **Phase 1**: 2-3시간
- **Phase 2**: 1-2시간
- **Phase 3**: 1시간
- **Phase 4**: 1시간
- **Phase 5**: 1-2시간

**총 예상 시간**: 6-9시간

---

## 🔧 기술 스택 및 도구

- **React**: 컴포넌트 구조
- **TypeScript**: 타입 안정성
- **SCSS**: 스타일링
- **디자인 토큰**: `design-tokens.css`, `font-tokens.css`
- **재사용 컴포넌트**: MainPage 헤더 구조 참고

---

## ⚠️ 주의사항

1. **기존 기능 유지**: TrendsSection과 UnifiedHealthTimeline의 기존 기능은 유지해야 함
2. **데이터 플로우**: 기존 데이터 로딩 로직 변경 없이 UI만 변경
3. **반응형 디자인**: 모바일 우선 설계 유지
4. **접근성**: 키보드 네비게이션 및 스크린 리더 지원 유지
5. **성능**: 불필요한 리렌더링 방지

---

## 📌 다음 단계

1. 사용자 승인 후 Phase 1부터 시작
2. 각 Phase 완료 후 사용자 테스트 요청
3. 문제 발생 시 해당 Phase 내에서 해결 후 진행






