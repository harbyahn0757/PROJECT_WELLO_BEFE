/**
 * VisitTrendsChart 스타일
 */
@use '../../../styles/variables' as *;

.visit-trends-wrapper {
  // HealthDataViewer에서 사용 시 간격 조정
  .visit-trends-header {
    margin-bottom: 2px !important; // 간격 대폭 줄임
    text-align: left;
    
    .visit-trends-title {
      font-size: 14px !important;
      font-weight: $font-weight-bold;
      color: #A16A51 !important;
      margin: 0 !important;
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }
  }
  
  .visit-trends-container {
    margin-top: $spacing-sm !important; // 그래프 카드를 아래로 내림 (-8px → $spacing-sm)
    padding-top: 0 !important;
    padding-left: 0 !important; // 카드 바깥 왼쪽 여백 완전 제거
    padding-right: 0 !important; // 카드 바깥 오른쪽 여백 완전 제거
    display: flex;
    justify-content: center; // 카드를 중앙 정렬
  }
  
  // 그래프 카드 내부 간격 조정 (HealthDataViewer에서 사용 시)
  .visit-trend-card {
    padding: $spacing-sm $spacing-sm 8px $spacing-sm !important; // 좌우 패딩 최소화 ($spacing-md → $spacing-sm)
    flex-shrink: 0; // 카드 크기 고정
    width: 100%; // 전체 너비 사용
    max-width: 100%; // 최대 너비 제한
    
    .trend-header {
      margin-bottom: 6px !important; // 제목과 그래프 사이 간격 대폭 줄임 (기본 16px에서 6px로)
      
      .trend-title {
        margin-bottom: 0 !important; // 추가 마진 제거
      }
    }
    
    .trend-chart {
      margin-top: 0 !important; // 상단 마진 제거
      padding-top: 0 !important; // 상단 패딩 제거
      padding-left: 0 !important; // 좌측 패딩 제거
      padding-right: 0 !important; // 우측 패딩 제거
      margin-bottom: 0 !important; // 하단 마진 제거 (범례와 간격 조정)
      padding-bottom: 0 !important; // 하단 패딩 제거
      display: flex;
      flex-direction: column;
      align-items: stretch; // 좌우 여백 제거 (center → stretch)
      width: 100%; // 전체 너비 사용
    }
    
    // 범례 스타일
    .visit-trends-legend {
      display: flex;
      justify-content: center;
      gap: $spacing-md;
      margin-top: 4px !important; // 그래프와 범례 간격 줄임
      padding-top: 0 !important;
      
      .legend-item {
        display: flex;
        align-items: center;
        gap: $spacing-xs;
        
        .legend-color {
          width: 12px;
          height: 12px;
          border-radius: 2px;
        }
        
        .legend-label {
          font-size: 12px;
          color: $gray-700;
          font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        }
      }
    }
  }
  
  // 일자별 방문 히스토리 헤더
  .visit-history-header {
    margin-top: $spacing-md !important;
    margin-bottom: $spacing-sm !important;

    .visit-history-title {
      font-size: 14px !important;
      font-weight: $font-weight-bold;
      color: #A16A51 !important;
      margin: 0 !important;
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }
  }

  // 일자별 방문 히스토리 리스트
  .visit-history-list {
    margin-top: $spacing-sm;
    display: flex;
    flex-direction: column;
    gap: $spacing-md;

    .visit-history-item {
      background: #FFFFFF;
      border-radius: $border-radius-md;
      padding: $spacing-md;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

      .visit-history-date {
        font-size: 16px;
        font-weight: $font-weight-bold;
        color: #333333;
        margin-bottom: $spacing-sm;
        font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      }

      .visit-history-details {
        display: flex;
        flex-direction: column;
        gap: $spacing-xs;
        margin-bottom: $spacing-sm;

        .visit-history-entry {
          padding: $spacing-xs;
          border-left: 3px solid #E0E0E0;
          padding-left: $spacing-sm;

          &.pharmacy {
            border-left-color: #FF9800;
          }

          &.hospital {
            border-left-color: #2196F3;
          }

          .visit-entry-header {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            margin-bottom: 4px;

            .visit-entry-type {
              font-size: 11px;
              font-weight: $font-weight-bold;
              padding: 2px 6px;
              border-radius: $border-radius-sm;
              font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;

              .pharmacy & {
                background: #FFF3E0;
                color: #F57C00;
              }

              .hospital & {
                background: #E3F2FD;
                color: #1976D2;
              }
            }

            .visit-entry-name {
              font-size: 13px;
              font-weight: $font-weight-medium;
              color: #333333;
              font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            }
          }

          .visit-entry-stats {
            display: flex;
            gap: $spacing-xs;
            flex-wrap: wrap;

            .visit-stat {
              font-size: 11px;
              color: #666666;
              background: #F5F5F5;
              padding: 2px 6px;
              border-radius: $border-radius-sm;
              font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            }
          }
        }
      }

      .visit-history-summary {
        display: flex;
        gap: $spacing-xs;
        flex-wrap: wrap;
        padding-top: $spacing-xs;
        border-top: 1px solid #E0E0E0;
        margin-top: $spacing-xs;

        .summary-item {
          font-size: 11px;
          color: #666666;
          background: #F5F5F5;
          padding: 4px 8px;
          border-radius: $border-radius-sm;
          font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        }
      }
    }
  }

  .visit-history-empty {
    text-align: center;
    padding: $spacing-lg;
    color: #999999;
    font-size: 14px;
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  }
  
  // BarChart 내부 스타일 오버라이드 - 차트 내부 여백 조정
  .welno-bar-chart {
    width: 100% !important; // 전체 너비 사용
    max-width: 100% !important; // 최대 너비 제한
    // 상단 여백 줄임
    margin-top: -10px !important; // 차트 상단 여백 줄임 (조정)
    padding-top: 0 !important;
    margin-left: 0 !important; // 좌측 마진 제거
    margin-right: 0 !important; // 우측 마진 제거
    margin-bottom: -30px !important; // 차트 하단 여백 대폭 줄임
    padding-bottom: 0 !important;
    
    // SVG 상단 여백 줄임
    &__svg {
      width: 100% !important; // 전체 너비 사용
      max-width: 100% !important; // 최대 너비 제한
      margin-top: -10px !important; // SVG 상단 여백 줄임 (조정)
      padding-top: 0 !important;
      margin-left: 0 !important; // 좌측 마진 제거
      margin-right: 0 !important; // 우측 마진 제거
      margin-bottom: -30px !important; // SVG 하단 여백 대폭 줄임
      padding-bottom: 0 !important;
      transform: translateY(-5px) !important; // 위로 이동 (조정)
    }
    
    // 그리드 라인 스타일 (더 구체적인 선택자 사용)
    &__grid {
      line.welno-bar-chart__grid-line {
        stroke: #E0E0E0 !important; // 더 연한 회색
        stroke-width: 0.5 !important; // 더 얇게
        stroke-dasharray: 2, 4 !important; // 점선 간격 조정
        opacity: 0.4 !important; // 더 투명하게
      }
    }
  }
  
  // 합쳐진 카드 내부 바 색상 (시리즈 ID 기반으로 색상 적용)
  .visit-trend-card--combined {
    // 약국 시리즈
    .welno-bar-chart__bar[data-series-id="pharmacy-visit-trend"],
    [data-series-id="pharmacy-visit-trend"] .welno-bar-chart__bar {
      fill: #FFEAE2 !important;
      stroke: #FFEAE2 !important;
    }
    
    // 약국 값 레이블 - 더 구체적인 선택자 사용
    .welno-bar-chart__value-label[data-series-id="pharmacy-visit-trend"],
    [data-series-id="pharmacy-visit-trend"] .welno-bar-chart__value-label,
    g[data-series-id="pharmacy-visit-trend"] .welno-bar-chart__value-label {
      fill: #FE6F32 !important; // 약국 막대 위 폰트 색상
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
    }
    
    // 병원 시리즈
    .welno-bar-chart__bar[data-series-id="hospital-visit-trend"],
    [data-series-id="hospital-visit-trend"] .welno-bar-chart__bar {
      fill: #DDF2FF !important;
      stroke: #DDF2FF !important;
    }
    
    // 병원 값 레이블 - 더 구체적인 선택자 사용
    .welno-bar-chart__value-label[data-series-id="hospital-visit-trend"],
    [data-series-id="hospital-visit-trend"] .welno-bar-chart__value-label,
    g[data-series-id="hospital-visit-trend"] .welno-bar-chart__value-label {
      fill: #327FEB !important; // 병원 막대 위 폰트 색상
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
    }
  }
  
  // BarChart 내부 스타일 (공통)
  .welno-bar-chart {
    // 축 라벨 폰트 색상
    &__x-axis,
    &__y-axis {
      .welno-bar-chart__axis-label {
        fill: #626262 !important; // 회색 계열
        font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
        font-size: 12px !important;
      }
      
      .welno-bar-chart__axis-tick {
        stroke: #E0E0E0 !important;
        stroke-width: 0.5 !important;
      }
      
      .welno-bar-chart__axis-text {
        fill: #626262 !important; // 회색 계열
        font-family: 'Poppins', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
        font-size: 8px !important;
        font-weight: 400 !important; // Regular
      }
    }
    
    // 값 레이블 폰트 (Pretendard Bold 12px)
    &__value-label {
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
      font-size: 12px !important;
      font-weight: $font-weight-bold !important;
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
      fill: #626262 !important; // 기본 색상 (카드별로 오버라이드됨)
      pointer-events: none !important; // 클릭 이벤트 방지
    }
  }
}

