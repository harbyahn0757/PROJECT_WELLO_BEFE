/**
 * HealthTrendsHeader 스타일
 * 메인 페이지 인사말 섹션과 동일한 배경색 및 스타일 사용
 */
@use '../../../styles/variables' as *;
@use '../../../styles/mixins' as *;

.health-trends-header {
  // 플로팅 버튼과 동일한 방식으로 화면 전체 너비 사용
  position: fixed !important; // 플로팅 버튼과 동일 (부모 제약 없음)
  top: 0 !important; // 상단 고정
  left: 0 !important; // 왼쪽부터 시작 (플로팅 버튼과 동일)
  right: 0 !important; // 오른쪽까지 (플로팅 버튼과 동일)
  width: 100vw !important; // 뷰포트 전체 너비 (플로팅 버튼과 동일)
  max-width: 100vw !important; // 최대 너비 제한 없음
  min-width: 100vw !important; // 최소 너비도 100vw
  box-sizing: border-box !important;
  z-index: 100 !important; // 다른 요소 위에 표시
  padding: 0 !important; // 좌우 빈 공간 제거
  margin: 0 !important; // 모든 마진 제거
  margin-left: calc(-50vw + 50%) !important; // 부모 컨테이너의 중앙 정렬 무시
  margin-right: calc(-50vw + 50%) !important; // 부모 컨테이너의 중앙 정렬 무시
  transform: none !important; // transform 제거 (left/right로 위치 조정)
  
  // 헤더 자체에 배경색과 스타일 적용 (단일 영역으로 통합)
  background: #FEF9EE !important; // 헤더 배경색
  border-radius: 0 0 24px 24px !important; // 하단만 둥글게 (더 넓은 둥근 처리, 12px -> 24px)
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important; // 바깥쪽 얇은 그림자 추가
  min-height: 90px !important; // 기본 최소 높이 (default 타입)
  height: auto !important; // 자동 높이 (내용에 맞게 가변 처리 - 그림자 상단부터 하단까지)
  display: flex !important;
  
  // large 타입일 때 최소 높이 증가 (description 포함 시 충분한 공간, 내용에 따라 더 늘어남)
  &--large {
    min-height: 120px !important; // 데스크톱: 큰 최소 높이
    // 내용(제목 + 설명)에 따라 높이가 자동으로 늘어남
  }
  
  // 헤더 높이를 CSS 변수로 설정 (토글 위치 계산용)
  --header-height: 90px; // 기본값 (default 타입)
  
  &--large {
    --header-height: 120px; // large 타입
  }
  align-items: center !important; // 세로 중앙 정렬
  padding-left: $spacing-md !important; // 내부 요소를 위한 좌측 패딩
  padding-right: $spacing-md !important; // 내부 요소를 위한 우측 패딩
  padding-top: $spacing-md !important; // 상단 패딩 (내용에 맞게 높이 자동 조정)
  padding-bottom: $spacing-md !important; // 하단 패딩 (내용에 맞게 높이 자동 조정)
  position: relative !important; // 절대 위치 기준
  box-sizing: border-box !important; // 패딩 포함 높이 계산

  // 안쪽 부분 (내부 구조 유지)
  &__header-greeting-section {
    width: 100% !important; // 부모 너비 전체 사용
    min-height: 100% !important; // 부모 높이 최소값
    height: auto !important; // 내용에 맞게 높이 자동 조정
    margin: 0 !important;
    padding: 0 !important; // 패딩 제거 (부모에서 처리)
    position: relative !important;
    display: flex !important;
    align-items: center !important; // 세로 중앙 정렬

    // 뒤로가기 버튼 (좌측) - 절대 위치로 배치
    .back-button {
      position: absolute !important; // 절대 위치
      left: $spacing-md !important; // 좌측 패딩 위치
      top: 50% !important; // 세로 중앙
      transform: translateY(-50%) !important; // 세로 중앙 정렬
      z-index: 1 !important; // 다른 요소 위에
    }
  }

  // 제목 영역 (헤더 영역 전체 기준 중앙 정렬)
  &__center {
    width: 100% !important; // 헤더 전체 너비 사용
    display: flex;
    flex-direction: column;
    align-items: center; // X축 중앙 정렬 (헤더 영역 전체 기준)
    justify-content: center; // Y축 중앙 정렬
    gap: $spacing-xs; // 제목과 설명/업데이트 정보 간격
    position: relative !important; // relative로 변경하여 부모 높이에 영향
    z-index: 0 !important; // 버튼보다 뒤에
    padding: $spacing-md $spacing-md !important; // 상하좌우 패딩 (내용에 맞게 높이 자동 조정)
    box-sizing: border-box !important;
    flex: 1 !important; // 남은 공간 차지
    min-height: fit-content !important; // 내용에 맞게 최소 높이
  }

  // 타이틀 - 통합 변수 파일에서 관리
  &__title {
    text-align: center; // 중앙 정렬
    font-family: $header-title-font-family !important;
    font-weight: $header-title-font-weight !important; // 500
    font-size: $header-title-font-size !important; // 18px
    line-height: $header-title-line-height !important; // 26px (상자 높이와 동일 또는 144%)
    color: $header-title-color !important; // #000000
    margin: 0 !important;
  }

  // 설명 텍스트 (제목 아래, 뒤로가기 버튼과 겹치지 않도록 아래로 배치) - 통합 변수 파일에서 관리
  &__description {
    text-align: center; // 중앙 정렬
    font-family: $header-description-font-family !important;
    font-weight: $header-description-font-weight !important; // 400 (Regular)
    font-size: $header-description-font-size !important; // 12px
    line-height: $header-description-line-height !important; // 16px
    letter-spacing: $header-description-letter-spacing !important; // 0%
    color: $gray-700 !important; // #4a5568
    margin: 8px 0 0 0 !important; // 위쪽 마진 증가 (제목과 간격)
    margin-top: 12px !important; // 더 아래로 배치
    padding: 0 $spacing-lg !important; // 좌우 패딩 증가 (뒤로가기 버튼과 겹치지 않도록)
    padding-left: 60px !important; // 좌측 패딩 증가 (뒤로가기 버튼 공간 확보)
    padding-right: 60px !important; // 우측 패딩 증가 (대칭)
    white-space: pre-line !important; // 줄바꿈 지원
  }

  // 마지막 업데이트 정보 (제목 아래, 중앙 정렬)
  &__update {
    display: flex;
    align-items: center;
    justify-content: center; // 중앙 정렬
    gap: 6px;
    font-size: $font-xs; // 12px
    color: $gray-550;
    font-family: var(--font-family-greeting, 'Noto Sans KR', sans-serif);
    
    &-icon {
      font-size: $font-xs;
      color: $gray-550;
    }
    
    &-text {
      font-size: $font-xs;
      color: $gray-550;
    }
    
  }
  
  // 새로고침 아이콘 (새비지 로고 외곽선만 갈색)
  &__refresh-icon {
    width: 18px;
    height: 18px;
    border: none;
    background: transparent;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    flex-shrink: 0;
    transition: all 0.2s ease;
    
    &:hover {
      transform: scale(1.1) rotate(90deg);
    }
    
    &:active {
      transform: scale(0.95) rotate(90deg);
    }
    
    // SVG 아이콘 스타일
    &-svg {
      width: 14px;
      height: 14px;
      transition: transform 0.3s ease;
    }
    
    &:hover &-svg {
      transform: rotate(180deg);
    }
  }

  // 모바일 반응형
  @media (max-width: 767px) {
    padding: $spacing-sm $spacing-sm !important;
    min-height: 52px; // 기본 높이 (default 타입)
    --header-height: 52px; // 모바일 기본값
    gap: $spacing-sm;
    
    // large 타입일 때 모바일에서도 높이 증가
    &.health-trends-header--large {
      min-height: 80px !important; // 모바일: 큰 높이
      --header-height: 80px; // 모바일 large 타입
    }
    
    &__back-button {
      width: 36px;
      height: 36px;
      
      svg {
        width: 18px;
        height: 18px;
      }
    }
    
    &__title {
      font-size: $font-base; // 16px
    }

    &__description {
      font-size: 13px !important; // 모바일에서 조금 작게
      padding: 0 $spacing-sm !important; // 좌우 패딩 줄임
    }
    
    &__update {
      font-size: 11px;
      
      &-icon {
        font-size: 11px;
      }
      
      &-text {
        font-size: 11px;
      }
    }
  }
}

