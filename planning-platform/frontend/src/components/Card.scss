@use '../styles/variables' as *;
@use '../styles/mixins' as *;

// 공용 Card 컴포넌트 스타일 - 아이콘 | 큰제목 + 작은설명 레이아웃
.card {
  background: rgba(255, 255, 255, 0.7) !important; // 배경색 투명도 조금만 넣기
  backdrop-filter: blur(16px);
  padding: 6px 16px 4px 16px !important; // 상하 패딩 더 줄임 (상: 6px, 하: 4px), 좌우 패딩 (16px)
  border-radius: $border-radius-xl;
  box-shadow: $shadow-md;
  border: 1px solid #EAE4D7 !important; // 아이템 외곽선 색상
  display: flex !important;
  flex-direction: column !important; // 세로 배치로 변경
  justify-content: flex-start !important; // 위쪽 정렬로 변경 (하단 여백 줄이기)
  transition: box-shadow 0.3s ease;
  text-align: left;
  min-height: 60px !important; // 하단 카드 높이 10px 더 줄임 (70px -> 60px)
  height: auto !important;
  
  &:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important; // 은은한 그림자 효과
  }

  // 클릭 가능한 카드 스타일
  &--clickable {
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;

    &:hover {
      transform: translateY(-1px) !important; // 더 은은한 이동 (2px -> 1px)
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important; // 은은한 그림자
      background: rgba(255, 255, 255, 0.85) !important; // 배경색 약간 밝게
    }

    &:active {
      transform: translateY(0) !important;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08) !important;
    }

    &:focus {
      outline: 2px solid $brand-brown;
      outline-offset: 2px;
    }
    
    // 비밀번호 모달이 열려있을 때 포커스 상태 초기화 (호버는 유지)
    body.password-modal-open & {
      &:focus,
      &:active {
        outline: none !important;
        transform: none !important;
        box-shadow: $shadow-md !important;
        background: rgba(255, 255, 255, 0.7) !important;
      }
    }
  }
  
  // 아이콘 스타일 - 왼쪽 고정
  &__icon {
    width: 48px;
    height: 48px;
    border-radius: $border-radius-lg;
    background-color: $brand-brown-light;
    color: $brand-brown;
    @include flex-center;
    flex-shrink: 0;
  }
  
  &__icon-svg {
    width: 28px;
    height: 28px;
    color: $brand-brown;
  }
  
  &__icon-text {
    font-size: 18px;
    font-weight: 700;
    color: $brand-brown;
    line-height: 1;
  }
  
  // 메인 콘텐츠 영역 - 텍스트 + 이미지 (아이콘 제거)
  &__main-content {
    display: flex !important;
    align-items: flex-start !important; // 텍스트를 이미지보다 아래로 (위쪽 정렬)
    gap: $spacing-md !important; // 텍스트와 이미지 사이 간격 (16px)
    flex: 1;
    position: relative;
    min-height: 74px !important; // 이미지 영역 높이 조정 (84px -> 74px, 10px 줄임)
    margin: 0 !important; // 모든 마진 제거
    padding: 0 !important; // 모든 패딩 제거
    padding-top: 6px !important; // 텍스트를 더 아래로 내리기
  }
  
  // 아이콘 숨김 (나머지 카드용)
  &__icon {
    display: none; // 아이콘 제거
  }
  
  // 콘텐츠 영역 - 텍스트 부분
  &__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start !important; // 텍스트 영역 위쪽 정렬
    gap: $spacing-xs !important; // 제목과 설명 사이 간격 (8px)
    min-width: 0; // 텍스트 오버플로우 방지
    margin: 0 !important; // 모든 마진 제거
    padding: 0 !important; // 모든 패딩 제거
    padding-top: 4px !important; // 텍스트를 더 아래로 (2px -> 4px)
  }
  
  // 오른쪽 이미지 영역 (배경색 없음)
  &__image-area {
    width: 74px !important; // 높이와 함께 10px 줄임 (84px -> 74px)
    height: 74px !important; // 높이 10px 줄임 (84px -> 74px)
    flex-shrink: 0;
    display: flex;
    align-items: flex-start !important; // 이미지 위쪽 정렬 (텍스트와 맞추기)
    justify-content: center !important; // 이미지 수평 중앙 정렬
    border-radius: 0; // 둥글게 하지 않음
    overflow: visible; // 이미지가 잘리지 않도록
    background: transparent; // 배경색 없음
    align-self: flex-start !important; // 이미지 영역 위쪽 정렬
    margin: 0 !important; // 모든 마진 제거
    padding: 0 !important; // 모든 패딩 제거
    padding-top: 0 !important; // 이미지 위쪽 패딩 없음
    
    &--placeholder {
      background: $gray-200;
    }
  }
  
  &__image {
    width: 105% !important; // 5% 크게
    height: 105% !important;
    object-fit: contain; // 이미지 비율 유지
    display: block;
    background: transparent; // 이미지 배경색 없음
    
    // 이미지 깜빡임 효과 (한번만)
    &--flash {
      animation: imageFlash 0.4s ease-in-out;
    }
    
    @keyframes imageFlash {
      0% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.6;
        transform: scale(0.95);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
  }
  
  &__image-placeholder {
    width: 100%;
    height: 100%;
    background: transparent; // placeholder도 배경색 없음
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0;
  }
  
  &__image-placeholder-text {
    font-size: $font-xs;
    color: $gray-400;
    text-align: center;
    padding: $spacing-xs;
    line-height: 1.2;
  }
  
  // 큰제목 스타일 (아이템 헤더 - Noto Sans KR)
  &__title {
    font-size: 15px !important; // 폰트 크기 -1 (16px -> 15px)
    font-weight: $font-weight-bold !important; // 볼드 처리
    color: #55433B !important; // 카드 헤더 텍스트 색상
    margin: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
    line-height: 1.2 !important;
    font-family: var(--font-family-item-header) !important; // Noto Sans KR
  }
  
  // 작은설명 스타일 (아이템 설명 - 소라임)
  &__description {
    font-size: 12px !important; // 폰트 크기 더 작게
    color: #8B6F5E !important; // 브라운톤 색상
    line-height: 1.4 !important; // 줄바꿈 간격 조정
    margin: 0 !important; // 모든 마진 제거
    white-space: normal !important; // 줄바꿈은 br 태그로 처리
    font-family: var(--font-family-item-description) !important; // 소라임
    
    // br 태그 확실히 표시되도록 설정
    br {
      display: block !important;
      content: "" !important;
      line-height: 1.4 !important;
      margin: 0 !important;
      padding: 0 !important;
      margin-top: 2px !important; // 줄 간격 추가
      height: 0 !important;
      width: 100% !important;
    }
    
    strong {
      color: $brand-brown;
      font-weight: 600;
      font-family: var(--font-family-item-description) !important; // 소라임
    }
  }
  
  // 바로가기 영역 - 하단 고정
  &__shortcut {
    margin-top: $spacing-md;
    padding-top: $spacing-xs;
    padding-right: $spacing-sm; // 오른쪽 패딩으로 조금 왼쪽으로 이동
    border-top: 1px solid $gray-300; // 조금 더 진한 가로줄
    min-height: 24px; // 고정 높이
    display: flex;
    align-items: center;
    justify-content: flex-end; // 오른쪽 정렬 유지
    flex-shrink: 0; // 축소 방지
  }
  
  &__shortcut-text {
    font-size: $font-sm; // $font-xs에서 1단계 증가
    color: $brand-brown;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
    
    &:hover {
      color: $brand-brown-hover;
      text-decoration: underline;
    }
    
    // 바로가기 아이콘 추가
    &::before {
      content: "→ ";
      margin-right: 2px;
      font-weight: 700;
    }
  }
  
  // 세로형 타입 (기본 레이아웃 유지)
  &--vertical {
    width: 100%;
  }
  
  // 가로형 타입 (가로 스크롤용 고정 너비) - 기존 대비 10% 확대
  &--horizontal {
    // 모바일: 화면의 73% (66%에서 10% 증가)
    width: calc(73vw - #{$spacing-md * 2});
    min-width: 231px; // 210px에서 10% 증가
    max-width: 317px; // 288px에서 10% 증가
    flex-shrink: 0;
    scroll-snap-align: start;
    
    // 스크롤 성능 개선
    will-change: transform;
    transform: translateZ(0); // GPU 가속 활성화
    
    // 가로형 카드의 아이콘 크기 조정
    .card__icon {
      width: 36px;
      height: 36px;
      font-size: 16px; // 아이콘 내부 텍스트/이미지 크기도 조정
    }
    
    // 데스크톱에서는 고정 너비 (10% 증가)
    @include respond-to(md) {
      width: 277px; // 252px에서 10% 증가
    }
  }
}

// 카드 컨테이너별 스타일

// 세로형 카드들 컨테이너
.cards-vertical {
  display: flex;
  flex-direction: column;
  gap: $spacing-sm;
  width: 100%;
}

// 가로형 카드들 컨테이너
.cards-horizontal {
  display: flex;
  overflow-x: auto;
  overflow-y: hidden;
  gap: $spacing-sm;
  padding: $spacing-sm calc((100vw - 75vw) / 2 + #{$spacing-md}) $spacing-lg calc((100vw - 75vw) / 2 + #{$spacing-md});
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  
  // 스크롤 성능 최적화
  will-change: scroll-position;
  contain: layout style paint;
  
  // 데스크톱에서는 기본 패딩으로 변경
  @include respond-to(md) {
    padding: $spacing-sm $spacing-md $spacing-lg $spacing-md;
  }
  
  // 스크롤바 숨기기
  &::-webkit-scrollbar {
    display: none;
  }
  scrollbar-width: none;
  
  // 가로 스크롤 힌트 그라데이션 제거 (깔끔한 UI)
}

// 스와이프 영역 (가로형 전용)
.swipe-area {
  display: flex;
  flex-direction: column;
  gap: $spacing-sm; // 힌트와 카드 간격 줄임
  margin-bottom: $spacing-md; // 푸터와의 간격 줄임
  
  &__hint {
    text-align: center;
    font-size: $font-xs;
    color: $gray-500;
    margin-top: 0; // 카드와의 간격 완전 제거
    padding: 0;
    line-height: 1.2;
    
    // 카드 위에 위치하는 힌트 (새로운 위치)
    &--top {
      margin-bottom: $spacing-sm; // 카드와의 간격
      margin-top: $spacing-lg; // 서브타이틀과의 간격 늘림
      color: $gray-600; // 조금 더 진한 색상으로 강조
      font-weight: 500; // 약간 두껍게
    }
  }
}
