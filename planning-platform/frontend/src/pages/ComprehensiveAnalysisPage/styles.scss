/**
 * ComprehensiveAnalysisPage Styles
 * 디자인 가이드라인 준수: 브랜드 컬러, 카드 시스템, 타이포그래피
 */

// 변수 import
@import '../../styles/variables';

// 브랜드 컬러 변수 (디자인 가이드 준수)
$brand-brown: #7c746a;
$brand-brown-hover: #696158;
$brand-brown-light: rgba(124, 116, 106, 0.1);
$background-beige: #f7e8d3;
$white: #ffffff;

// 텍스트 컬러
$gray-900: #1a202c;
$gray-800: #2d3748;
$gray-700: #4a5568;
$gray-600: #718096;
$gray-500: #a0aec0;
$gray-400: #cbd5e0;
$gray-300: #e2e8f0;
$gray-200: #edf2f7;
$gray-100: #f7fafc;
$gray-50: #f7fafc;

// 상태별 컬러
$success: #48bb78;
$warning: #ed8936;
$error: #f56565;
$info: #4299e1;

// 상태별 컬러
$success: #48bb78;
$warning: #ed8936;
$error: #f56565;
$info: #4299e1;

// 간격 시스템
$spacing-xs: 0.5rem;   // 8px
$spacing-sm: 0.75rem;  // 12px
$spacing-md: 1rem;     // 16px
$spacing-lg: 1.5rem;   // 24px
$spacing-xl: 2rem;     // 32px
$spacing-2xl: 3rem;    // 48px

// 폰트 크기
$font-xs: 0.75rem;   // 12px
$font-sm: 0.875rem;  // 14px
$font-base: 1rem;    // 16px
$font-lg: 1.125rem;  // 18px
$font-xl: 1.25rem;   // 20px
$font-2xl: 1.5rem;   // 24px
$font-3xl: 1.875rem; // 30px

// 폰트 두께
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

// 모서리 반경
$border-radius-sm: 0.25rem;  // 4px
$border-radius-md: 0.375rem; // 6px
$border-radius-lg: 0.5rem;   // 8px
$border-radius-xl: 0.75rem;  // 12px
$border-radius-full: 9999px; // 완전한 원형

// 그림자
$shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
$shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);

// 새로운 컨테이너 스타일 (디자인 가이드 준수)
.comprehensive-analysis-content {
  padding: $spacing-lg $spacing-md $spacing-2xl; // 상단, 좌우, 하단
  background: transparent; // 배경은 부모에서 처리
  min-height: calc(100vh - 120px);
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
  
  // 모바일 우선 설계
  @media (max-width: 768px) {
    padding: $spacing-md $spacing-sm $spacing-xl; // 모바일에서는 작은 하단 여백
  }
  
  @media (min-width: 768px) {
    max-width: 1200px;
    margin: 0 auto;
    padding: $spacing-xl $spacing-lg $spacing-2xl; // 데스크톱에서는 큰 하단 여백
  }
}

.comprehensive-analysis-page {
  min-height: 100vh;
  background: $background-beige;
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
  
  // 모바일 우선 설계
  padding: 0;
  
  @media (min-width: 768px) {
    padding: $spacing-lg;
  }
}

// 헤더 섹션
.analysis-header {
  background: $white;
  border-bottom: 1px solid $gray-200;
  padding: $spacing-lg;
  margin-bottom: $spacing-xl;
  
  @media (min-width: 768px) {
    border-radius: $border-radius-xl;
    box-shadow: $shadow-md;
    margin-bottom: $spacing-2xl;
  }
  
  .header-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: $spacing-lg;
  }
  
  .back-button {
    background: none;
    border: none;
    color: $brand-brown;
    font-size: $font-base;
    font-weight: $font-weight-medium;
    cursor: pointer;
    padding: $spacing-sm;
    border-radius: $border-radius-md;
    transition: all 0.2s ease;
    
    &:hover {
      background: $brand-brown-light;
      color: $brand-brown-hover;
    }
  }
  
  .header-text {
    flex: 1;
  }
  
  .page-title {
    font-size: $font-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin: 0 0 $spacing-xs 0;
    
    @media (min-width: 768px) {
      font-size: $font-3xl;
    }
  }
  
  .page-subtitle {
    font-size: $font-sm;
    color: $gray-600;
    margin: 0;
    line-height: 1.5;
  }
}

// 메인 컨텐츠 영역
.analysis-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 $spacing-md;
  display: flex;
  flex-direction: column;
  gap: $spacing-xl;
  
  @media (min-width: 768px) {
    padding: 0;
  }
}

// 공통 카드 스타일
%card-base {
  background: $white;
  border-radius: $border-radius-lg;
  box-shadow: $shadow-md;
  border: 1px solid $gray-200;
  overflow: hidden;
  transition: all 0.2s ease;
  
  &:hover {
    box-shadow: $shadow-lg;
  }
}

// 카드 헤더 스타일
%card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: $spacing-lg;
  border-bottom: 1px solid $gray-200;
  background: #a69b8f; // 플로팅 버튼 색상의 연한 버전
  
  .section-title {
    font-size: $font-xl;
    font-weight: $font-weight-bold;
    color: $white; // 헤더 배경이 어두워졌으므로 흰색 텍스트
    margin: 0;
  }
}

// 배지 스타일
%badge-base {
  display: inline-flex;
  align-items: center;
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-md;
  font-size: $font-xs;
  font-weight: $font-weight-medium;
  
  .badge-text {
    margin: 0;
  }
}

// AI 분석 리포트 카드 (디자인 가이드 준수)
.analysis-card {
  background: $white;
  border-radius: $border-radius-xl;
  box-shadow: $shadow-md;
  overflow: hidden;
  border: 1px solid $gray-200;
  
  // 섹션 간 일관된 간격 (24px)
  margin-bottom: $spacing-lg;
  
  // 마지막 카드는 하단 여백 제거
  &:last-child {
    margin-bottom: 0;
  }
  
  @media (min-width: 768px) {
    // 데스크톱에서는 더 큰 간격 (32px)
    margin-bottom: $spacing-xl;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
  
  .card-header {
    padding: $spacing-xs $spacing-lg $spacing-xs; // 높이 더 줄임: 상단, 좌우, 하단
    border-bottom: 1px solid $gray-200;
    background: #8b7355; // 브라운톤 배경
    display: flex;
    justify-content: space-between;
    align-items: center;
    
    .section-title {
      font-size: $font-lg; // 폰트 크기 줄임
      font-weight: $font-weight-semibold;
      color: $white; // 브라운톤 배경에 맞게 흰색 텍스트
      margin: 0;
    }
    
    .chart-info {
      display: flex;
      align-items: center;
      gap: $spacing-sm;
      
      .info-text {
        font-size: $font-sm;
        color: $gray-600;
        font-weight: $font-weight-medium;
        background: $gray-100;
        padding: $spacing-xs $spacing-sm;
        border-radius: $border-radius-sm;
        border: 1px solid $gray-200;
        margin: 0;
      }
    }
  }
  
  .analysis-badge {
    background: $brand-brown-light;
    color: $brand-brown;
    padding: $spacing-xs $spacing-sm;
    border-radius: $border-radius-md;
    font-size: $font-sm;
    font-weight: $font-weight-medium;
  }
  
  .analysis-results {
    padding: $spacing-lg;
  }
  
  // 카드 내부 콘텐츠 패딩 (모든 섹션 통일)
  .analysis-loading,
  .analysis-results,
  .summary-section,
  .insights-section,
  .chart-wrapper {
    padding: $spacing-lg;
  }
  
  .summary-section {
    margin-bottom: $spacing-xl;
    
    .subsection-title {
      font-size: $font-lg;
      font-weight: $font-weight-semibold;
      color: $gray-800;
      margin: 0 0 $spacing-md 0;
    }
    
    .summary-content {
      background: $gray-50;
      padding: $spacing-lg;
      border-radius: $border-radius-md;
      border-left: 4px solid $brand-brown;
    }
    
    .summary-text {
      font-size: $font-base;
      color: $gray-700;
      line-height: 1.6;
      margin: 0;
    }
  }
  
  .insights-section {
    .subsection-title {
      font-size: $font-lg;
      font-weight: $font-weight-semibold;
      color: $gray-800;
      margin: 0 0 $spacing-lg 0;
    }
  }
  
  .insights-grid {
    display: grid;
    gap: $spacing-md;
    
    @media (min-width: 768px) {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
  }
  
  .insight-item {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $border-radius-md;
    padding: $spacing-lg;
    transition: all 0.2s ease;
    
    &.good {
      border-left: 4px solid $success;
      
      .status-indicator {
        background: rgba($success, 0.1);
        color: $success;
      }
    }
    
    &.warning {
      border-left: 4px solid $warning;
      
      .status-indicator {
        background: rgba($warning, 0.1);
        color: $warning;
      }
    }
    
    &.danger {
      border-left: 4px solid $error;
      
      .status-indicator {
        background: rgba($error, 0.1);
        color: $error;
      }
    }
    
    &:hover {
      box-shadow: $shadow-sm;
    }
  }
  
  .insight-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: $spacing-sm;
  }
  
  .insight-category {
    font-size: $font-lg;
    font-weight: $font-weight-semibold;
    color: $gray-800;
    margin: 0;
  }
  
  .status-indicator {
    @extend %badge-base;
    font-size: $font-xs;
  }
  
  .insight-message {
    font-size: $font-sm;
    color: $gray-600;
    line-height: 1.5;
    margin: 0 0 $spacing-sm 0;
  }
  
  .insight-recommendation {
    font-size: $font-sm;
    color: $gray-700;
    background: $gray-50;
    padding: $spacing-sm;
    border-radius: $border-radius-sm;
    margin: 0;
    
    strong {
      color: $gray-800;
    }
  }
  
  // 로딩 상태
  .analysis-loading {
    padding: $spacing-2xl;
    text-align: center;
  }
  
  .loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $spacing-lg;
  }
  
  .loading-spinner {
    .spinner-icon {
      width: 48px;
      height: 48px;
      animation: spin 2s linear infinite;
      filter: opacity(0.8);
    }
  }
  
  .loading-text {
    font-size: $font-base;
    color: $gray-600;
    margin: 0;
  }
  
  .analyze-button {
    background: $brand-brown;
    color: $white;
    border: none;
    padding: $spacing-md $spacing-xl;
    border-radius: $border-radius-lg;
    font-size: $font-base;
    font-weight: $font-weight-medium;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-sm;
    
    &:hover:not(:disabled) {
      background: $brand-brown-hover;
      transform: translateY(-1px);
    }
    
    &:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .button-spinner {
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      filter: brightness(0) invert(1); // 흰색으로 변경
    }
  }
}

// 차트 카드 (통일된 스타일)
.chart-wrapper {
  padding: $spacing-lg;
  min-height: 350px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  // 차트 로딩 상태 (일관된 디자인)
  .chart-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-height: 300px;
    background: $gray-50;
    border-radius: $border-radius-md;
    border: 1px dashed $gray-300;
    padding: $spacing-2xl;
    text-align: center;
    
    .loading-spinner {
      margin-bottom: $spacing-lg;
    
      .spinner-icon {
        width: 48px;
        height: 48px;
        animation: spin 2s linear infinite;
        filter: opacity(0.7);
      }
    }
    
    .loading-text {
      font-size: $font-base;
      font-weight: $font-weight-medium;
      color: $gray-600;
      margin: 0;
      text-align: center;
    }
  }
}

// chart-info 스타일은 위에서 이미 정의됨 (중복 제거)

// 기존 차트 카드 (호환성 유지)
.chart-card {
  @extend .analysis-card;
  
  .card-header {
    @extend %card-header;
  }
  
  .chart-info {
    @extend %badge-base;
    background: $info;
    color: $white;
  }
  
  .chart-wrapper {
    padding: $spacing-lg;
    overflow-x: auto;
    scroll-behavior: smooth;
    
    // 스크롤바 스타일링
    &::-webkit-scrollbar {
      height: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: $gray-100;
      border-radius: 3px;
    }
    
    &::-webkit-scrollbar-thumb {
      background: $gray-300;
      border-radius: 3px;
      
      &:hover {
        background: $gray-400;
      }
    }
  }
}

// 약물 상호작용 카드
.interaction-card {
  @extend %card-base;
  
  .card-header {
    @extend %card-header;
  }
  
  .safety-badge {
    @extend %badge-base;
    background: rgba($success, 0.1);
    color: $success;
  }
  
  .interactions-list {
    padding: $spacing-lg;
    display: flex;
    flex-direction: column;
    gap: $spacing-md;
  }
  
  .interaction-item {
    border: 1px solid $gray-200;
    border-radius: $border-radius-md;
    padding: $spacing-lg;
    
    &.high {
      border-left: 4px solid $error;
      background: rgba($error, 0.02);
    }
    
    &.medium {
      border-left: 4px solid $warning;
      background: rgba($warning, 0.02);
    }
    
    &.low {
      border-left: 4px solid $info;
      background: rgba($info, 0.02);
    }
  }
  
  .interaction-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: $spacing-sm;
  }
  
  .drug-combination {
    font-size: $font-lg;
    font-weight: $font-weight-semibold;
    color: $gray-800;
    margin: 0;
  }
  
  .severity-badge {
    @extend %badge-base;
    
    &.high {
      background: rgba($error, 0.1);
      color: $error;
    }
    
    &.medium {
      background: rgba($warning, 0.1);
      color: $warning;
    }
    
    &.low {
      background: rgba($info, 0.1);
      color: $info;
    }
  }
  
  .interaction-description {
    font-size: $font-sm;
    color: $gray-600;
    margin: 0 0 $spacing-sm 0;
    line-height: 1.5;
  }
  
  .interaction-recommendation {
    font-size: $font-sm;
    color: $gray-700;
    background: $gray-50;
    padding: $spacing-sm;
    border-radius: $border-radius-sm;
    
    strong {
      color: $gray-800;
    }
  }
  
  .no-interactions {
    padding: $spacing-2xl;
    text-align: center;
    
    .safe-icon {
      font-size: $font-3xl;
      margin-bottom: $spacing-md;
    }
    
    .safe-message {
      font-size: $font-base;
      color: $gray-600;
      margin: 0;
      line-height: 1.5;
    }
  }
}

// 영양 권장사항 카드
.nutrition-card {
  @extend %card-base;
  
  .card-header {
    @extend %card-header;
  }
  
  .nutrition-badge {
    @extend %badge-base;
    background: rgba($success, 0.1);
    color: $success;
  }
  
  .nutrition-content {
    padding: $spacing-lg;
  }
  
  .nutrition-grid {
    display: grid;
    gap: $spacing-xl;
    
    @media (min-width: 768px) {
      grid-template-columns: 1fr 1fr;
    }
  }
  
  .nutrition-section {
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: $spacing-lg;
    }
    
    .nutrition-title {
      font-size: $font-lg;
      font-weight: $font-weight-semibold;
      margin: 0;
    }
    
    .warning-icon,
    .recommend-icon {
      font-size: $font-lg;
    }
  }
  
  .avoid-section {
    .nutrition-title {
      color: $error;
    }
  }
  
  .recommend-section {
    .nutrition-title {
      color: $success;
    }
  }
  
  .nutrition-list {
    display: flex;
    flex-direction: column;
    gap: $spacing-md;
  }
  
  .nutrition-item {
    padding: $spacing-md;
    border-radius: $border-radius-md;
    border: 1px solid $gray-200;
    
    .food-name {
      font-size: $font-base;
      font-weight: $font-weight-semibold;
      margin: 0 0 $spacing-xs 0;
    }
    
    .food-reason,
    .food-benefit {
      font-size: $font-sm;
      color: $gray-600;
      margin: 0;
      line-height: 1.4;
    }
  }
  
  .avoid-item {
    background: rgba($error, 0.02);
    border-left: 3px solid $error;
    
    .food-name {
      color: $error;
    }
  }
  
  .recommend-item {
    background: rgba($success, 0.02);
    border-left: 3px solid $success;
    
    .food-name {
      color: $success;
    }
  }
}

// 면책 조항 카드
.disclaimer-card {
  @extend %card-base;
  background: $gray-50;
  border: 1px solid $gray-300;
  
  .disclaimer-content {
    padding: $spacing-lg;
  }
  
  .disclaimer-title {
    font-size: $font-lg;
    font-weight: $font-weight-semibold;
    color: $gray-800;
    margin: 0 0 $spacing-lg 0;
  }
  
  .disclaimer-text {
    margin-bottom: $spacing-lg;
    
    p {
      font-size: $font-sm;
      color: $gray-600;
      margin: 0 0 $spacing-xs 0;
      line-height: 1.5;
    }
  }
  
  .data-source {
    border-top: 1px solid $gray-300;
    padding-top: $spacing-md;
    
    p {
      font-size: $font-xs;
      color: $gray-500;
      margin: 0 0 $spacing-xs 0;
      
      strong {
        color: $gray-600;
      }
    }
  }
}

// 에러 메시지
.error-message {
  background: rgba($error, 0.1);
  border: 1px solid rgba($error, 0.3);
  border-radius: $border-radius-md;
  padding: $spacing-lg;
  text-align: center;
  
  p {
    color: $error;
    font-size: $font-base;
    margin: 0;
  }
}

// 애니메이션
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// 반응형 조정
@media (max-width: 767px) {
  .comprehensive-analysis-page {
    .analysis-content {
      gap: $spacing-lg;
    }
    
    .insights-grid {
      grid-template-columns: 1fr;
    }
    
    .nutrition-grid {
      grid-template-columns: 1fr;
      gap: $spacing-lg;
    }
    
    .chart-wrapper {
      overflow-x: scroll;
      
      > * {
        min-width: 600px;
      }
    }
  }
}

// 상태 아이콘 스타일 (파비콘 기반 - 일관성 통일)
.status-icon {
  width: 24px;
  height: 24px;
  display: inline-block;
  
  &.warning {
    filter: hue-rotate(30deg) saturate(1.5); // 주황색 톤
  }
  
  &.recommend {
    filter: hue-rotate(120deg) saturate(1.2); // 녹색 톤
  }
}

// 안전 아이콘 (약물 상호작용)
.safe-icon {
  display: flex;
  justify-content: center;
  margin-bottom: $spacing-md;
  
  .status-icon {
    width: 48px;
    height: 48px;
    filter: hue-rotate(120deg) saturate(1.2); // 녹색 톤
  }
}

// 영양 섹션 헤더 (아이콘 통일)
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: $spacing-md;
  
  .nutrition-title {
    font-size: $font-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    margin: 0;
  }
  
  .warning-icon,
  .recommend-icon {
    display: flex;
    align-items: center;
  }
}

// 차트 로딩 스피너 (일관성 통일)
.chart-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $spacing-2xl;
  text-align: center;
  
  .loading-spinner {
    margin-bottom: $spacing-md;
    
    .spinner-icon {
      width: 48px;
      height: 48px;
      animation: spin 2s linear infinite;
      filter: opacity(0.8);
    }
  }
  
  .loading-text {
    font-size: $font-base;
    color: $gray-600;
    margin: 0;
  }
}

// 건강 지표 카드 슬라이더 - 각 카드에 그래프 포함
// Health Metrics Container
.health-metrics-container {
  position: relative;
}

.health-metrics-slider {
  display: flex;
  gap: $spacing-md; // 카드 간격 줄임
  overflow-x: auto;
  padding: $spacing-xs $spacing-lg $spacing-lg $spacing-lg; // 좌우 패딩 추가로 슬라이드 시에도 간격 유지
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  
  // 스크롤바 숨김 (닷 슬라이더 사용)
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

// Dot Indicators
.slider-dots {
  display: flex;
  justify-content: center;
  gap: $spacing-xs;
  margin: $spacing-sm 0 $spacing-lg 0;
  
  .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: $gray-300;
    cursor: pointer;
    transition: all 0.3s ease;
    
    &.active {
      background: $brand-brown;
      transform: scale(1.2);
    }
    
    &:hover {
      background: $brand-brown-hover;
      transform: scale(1.1);
    }
  }
}

.health-metric-card {
  min-width: 300px;
  max-width: 320px;
  flex-shrink: 0;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid #f5f5dc; // 연한 베이지색 외곽선
  border-radius: $border-radius-lg;
  padding: $spacing-lg;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  scroll-snap-align: start;
  position: relative;
  box-shadow: $shadow-sm;
  
  // 슬라이더 패딩으로 여백 처리하므로 카드 마진 제거
  // &:first-child, &:last-child 마진 제거됨
  
  &:hover {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: $shadow-md;
    transform: translateY(-3px);
    border-color: $brand-brown;
  }
  
  .metric-header {
    display: flex;
    flex-direction: column;
    gap: $spacing-xs; // 혈압-숫자 간격 줄임
    margin-bottom: $spacing-sm; // 숫자-그래프 간격 줄임
    position: relative;
      
      .status-badge {
        position: absolute;
        top: 0;
        right: 0;
        padding: 2px 8px;
        border-radius: 8px;
        font-size: 10px;
        font-weight: 600;
        color: white;
        
        &.status-normal {
          background: $brand-brown;
        }
        
        &.status-warning {
          background: $warning;
        }
        
        &.status-abnormal {
          background: #ef4444;
        }
      }
      
      .metric-title {
        font-size: $font-base; // $font-lg에서 $font-base로 변경 (-2 크기)
        font-weight: 600;
        color: $gray-800;
        margin: 0;
        padding-right: 60px; // 뱃지 공간 확보
      }
      
      .metric-value {
        display: flex;
        align-items: baseline;
        gap: 6px;
        
        .value {
          font-size: $font-xl; // $font-2xl에서 $font-xl로 변경 (-2 크기)
          font-weight: 700;
          color: $brand-brown;
        }
        
        .unit {
          font-size: $font-sm; // $font-base에서 $font-sm로 변경 (-2 크기)
          color: $gray-600;
          font-weight: 500;
        }
      }
    }
    
    .metric-chart {
      width: 100%;
      height: 120px; // 그래프 높이 증가
      border-radius: $border-radius-md;
      background: rgba(248, 250, 252, 0.5);
      padding: 0; // 패딩 제거로 그래프 영역 최대화
      display: flex;
      align-items: center;
      justify-content: center;
      
      .no-data {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: $gray-500;
        font-size: $font-sm;
        
        p {
          margin: 0;
        }
      }
      
      .single-data {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        gap: $spacing-xs;
        
        .single-point {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 4px;
          
          .point-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: $brand-brown;
            box-shadow: 0 0 0 3px rgba(124, 116, 106, 0.2);
            animation: pulse 2s infinite;
          }
          
          .point-value {
            font-size: $font-sm;
            font-weight: 600;
            color: $brand-brown;
          }
        }
        
        .single-data-label {
          font-size: $font-xs;
          color: $gray-500;
          margin: 0;
        }
      }
    }
  }

// 단일 데이터 포인트 애니메이션
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(124, 116, 106, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(124, 116, 106, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(124, 116, 106, 0);
  }
}

// 모바일 반응형
@media (max-width: 480px) {
  .health-metrics-slider {
    gap: $spacing-sm; // 모바일에서 더 좁은 간격
    padding: $spacing-xs $spacing-md $spacing-lg $spacing-md; // 모바일에서도 좌우 패딩 유지
    
    .health-metric-card {
      min-width: 280px; // 모바일에서 카드 크기 증가
      max-width: 300px;
      padding: $spacing-md;
      
      // 슬라이더 패딩으로 여백 처리하므로 모바일에서도 카드 마진 제거
      
      .metric-header {
        .metric-title {
          font-size: $font-sm; // 모바일에서 더 작게
          padding-right: 50px;
        }
        
        .metric-value {
          .value {
            font-size: $font-lg; // 모바일에서 더 작게
          }
          
          .unit {
            font-size: $font-sm;
          }
        }
      }
      
      .metric-chart {
        height: 120px; // 모바일에서도 그래프 높이 증가
      }
    }
  }
}

// 분석 진행률 표시
.analysis-progress {
  margin: $spacing-lg 0;
  
  .progress-bar-container {
    width: 100%;
    height: 8px;
    background-color: $gray-200;
    border-radius: $border-radius-full;
    overflow: hidden;
    margin-bottom: $spacing-sm;
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, $brand-brown, $brand-brown-hover);
      border-radius: $border-radius-full;
      transition: width 0.3s ease;
      position: relative;
      
      // 진행률 바 애니메이션 효과
      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: shimmer 2s infinite;
      }
    }
  }
  
  .progress-text {
    text-align: center;
    font-size: $font-sm;
    color: $gray-600;
    margin: 0;
    font-weight: $font-weight-medium;
  }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

// 접근성 개선
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .analysis-progress .progress-bar::after {
    animation: none;
  }
}

// Visit Trends Slider
.visit-trends-slider {
  display: flex;
  gap: $spacing-md;
  overflow-x: auto;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
  padding: $spacing-xs 0 $spacing-lg 0; // 원래대로 복원
  
  // 모바일에서는 스크롤바 숨김
  @media (max-width: $breakpoint-md) {
    &::-webkit-scrollbar {
      display: none;
    }
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  // 데스크톱에서는 스크롤바 표시
  @media (min-width: $breakpoint-md) {
    &::-webkit-scrollbar {
      height: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: $gray-100;
      border-radius: $border-radius-sm;
    }
    
    &::-webkit-scrollbar-thumb {
      background: $gray-300;
      border-radius: $border-radius-sm;
      
      &:hover {
        background: $gray-400;
      }
    }
  }
}

.visit-trend-card {
  flex: 0 0 auto;
  background: $white;
  border: 1px solid #f5f5dc; // 연한 베이지색 외곽선
  border-radius: $border-radius-md;
  padding: $spacing-md;
  scroll-snap-align: start;
  
  // 첫 번째와 마지막 카드에 여백 추가 (건강지표와 동일)
  &:first-child {
    margin-left: $spacing-lg;
  }
  
  &:last-child {
    margin-right: $spacing-lg;
  }
  
  // 모바일: 화면 너비의 85%
  @media (max-width: $breakpoint-md) {
    min-width: 85vw;
    max-width: 85vw;
  }
  
  // 태블릿: 고정 너비
  @media (min-width: $breakpoint-md) and (max-width: $breakpoint-lg) {
    min-width: 350px;
  }
  
  // 데스크톱: 더 큰 고정 너비
  @media (min-width: $breakpoint-lg) {
    min-width: 380px;
  }
  
  &:first-child {
    margin-left: $spacing-lg;
  }
  
  &:last-child {
    margin-right: $spacing-lg;
  }
  
  .trend-header {
    margin-bottom: $spacing-md;
    
    .trend-title {
      font-size: $font-lg;
      font-weight: $font-weight-semibold;
      color: $gray-800;
      margin: 0;
    }
  }
  
  .trend-chart {
    .chart-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 250px;
      
      .loading-spinner {
        margin-bottom: $spacing-sm;
        
        .spinner-icon {
          width: 24px;
          height: 24px;
          animation: spin 1s linear infinite;
          filter: hue-rotate(30deg);
        }
      }
      
      .loading-text {
        font-size: $font-sm;
        color: $gray-600;
        margin: 0;
      }
    }
  }
}